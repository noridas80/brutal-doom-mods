actor WeaponFix_PistolSpawner: PistolSpawner replaces PistolSpawner
{
	//$Category Weapons
	//$Sprite P3STKA0
	//$Title "Pistol spawner"
	Inventory.PickupMessage "$GOTPISTOL"
	Inventory.PickupSound "Pistol/Draw"
	States
	{
	Spawn:
		P3ST A 0
		P3ST A 1
		P3ST A 0 A_ChangeFlag("THRUACTORS", 0)
	Stay:
		P3ST K -1
		Stop

	Pickup:
		P3ST A 0
		P3ST A 0 A_JumpIfInventory("BrutalPistol", 1, "DualPistol")
		P3ST A 0 A_JumpIfInventory("DualPistols", 1, "AmmoOnly")
	PickupNormal:
		P3ST A 0 A_GiveInventory("BrutalPistol", 1)
		P3ST A 0 A_GiveInventory("Clip1", random(20,40))
		Stop

	DualPistol:
		P3ST A 0
		P3ST A 0 A_GiveInventory("HasDualPistol", 1)
		P3ST A 0 A_GiveInventory("Clip1", random(20,40))
		Stop

	AmmoOnly:
		P3ST A 0
		P3ST A 0 A_GiveInventory("Clip1", random(20,40))
		Stop
	}
}

ACTOR WeaponFix_SMGSpawner : SMGSpawner replaces SMGSpawner
{
	//$Category Weapons
	//$Sprite SMGZA0
	//$Title "SMG spawner"
	Inventory.PickupSound "CBOXPKUP"
	Inventory.PickupMessage "$GOTSMG"
	States
	{
	Spawn:
		SMGZ A 0
		SMGZ AA 0 ACS_NamedExecuteAlways("NoRandomSprites")
		SMGZ A 10
		SMGZ A 0 A_Jump(128,2)
		SMGZ A 0 A_SetScale(-scalex,scaley)
	NoRandom:
		SMGZ A 0 A_ChangeFlag("THRUACTORS", 0)
		SMGZ A -1
		Stop

	Pickup:
		SMGZ A 0
		SMGZ A 0 A_JumpIfInventory("BrutalSMG", 1, "Dual")
		SMGZ A 0 A_JumpIfInventory("DualSMG", 1, "AmmoOnly")
	PickupNormal:
		SMGZ A 0 A_GiveInventory("BrutalSMG", 1)
		SMGZ A 0 A_GiveInventory("Clip1", random(20,40))
		Stop

	Dual:
		SMGZ A 0
		SMGZ A 0 A_GiveInventory("HasDualSMG", 1)
		SMGZ A 0 A_GiveInventory("Clip1", random(20,40))
		Stop

	AmmoOnly:
		SMGZ A 0 A_GiveInventory("Clip1", random(20,40))
		Stop
	}
}